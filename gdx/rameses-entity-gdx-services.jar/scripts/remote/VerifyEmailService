import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import com.rameses.services.extended.*;
import java.text.*;

public class VerifyEmailService {

	@Service(value="SmtpService", connection="email-sms-server")
	def smtpSvc;

	@ProxyMethod
	public def verifyEmail(data) {
		if( !data.email ) throw new Exception("Please provide an email");
		println "receiving mail xxx " + data.email;
		Random rand = new Random(); 
		def otp = rand.nextInt(10000); 
		def msg = " Your key is " + otp;
		smtpSvc.send( [to: data.email, subject:msg, message: msg] );
		return [key: otp];
	}


}